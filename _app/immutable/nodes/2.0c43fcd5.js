import{s as safe_not_equal,n as noop,o as onMount}from"../chunks/scheduler.e108d1fd.js";import{S as SvelteComponent,i as init,g as element,s as space,m as text,h as claim_element,j as children,y as get_svelte_dataset,c as claim_space,n as claim_text,f as detach,k as attr,a as insert_hydration,x as append_hydration,o as set_data,r as create_component,u as claim_component,l as set_style,v as mount_component,z as listen,d as transition_in,t as transition_out,w as destroy_component}from"../chunks/index.7e6319f2.js";function create_fragment$1(r){let e,t,n,s='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M0 80v48c0 17.7 14.3 32 32 32H48 96V80c0-26.5-21.5-48-48-48S0 53.5 0 80zM112 32c10 13.4 16 30 16 48V384c0 35.3 28.7 64 64 64s64-28.7 64-64v-5.3c0-32.4 26.3-58.7 58.7-58.7H480V128c0-53-43-96-96-96H112zM464 480c61.9 0 112-50.1 112-112c0-8.8-7.2-16-16-16H314.7c-14.7 0-26.7 11.9-26.7 26.7V384c0 53-43 96-96 96H368h96z"></path></svg>',a,o,u="Level Name",c,l,h,f,d,v,g='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M78.6 5C69.1-2.4 55.6-1.5 47 7L7 47c-8.5 8.5-9.4 22-2.1 31.6l80 104c4.5 5.9 11.6 9.4 19 9.4h54.1l109 109c-14.7 29-10 65.4 14.3 89.6l112 112c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-112-112c-24.2-24.2-60.6-29-89.6-14.3l-109-109V104c0-7.5-3.5-14.5-9.4-19L78.6 5zM19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L233.7 374.3c-7.8-20.9-9-43.6-3.6-65.1l-61.7-61.7L19.9 396.1zM512 144c0-10.5-1.1-20.7-3.2-30.5c-2.4-11.2-16.1-14.1-24.2-6l-63.9 63.9c-3 3-7.1 4.7-11.3 4.7H352c-8.8 0-16-7.2-16-16V102.6c0-4.2 1.7-8.3 4.7-11.3l63.9-63.9c8.1-8.1 5.2-21.8-6-24.2C388.7 1.1 378.5 0 368 0C288.5 0 224 64.5 224 144l0 .8 85.3 85.3c36-9.1 75.8 .5 104 28.7L429 274.5c49-23 83-72.8 83-130.5zM56 432a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"></path></svg>',b,y,C="Creator",I,p,m,w,S,T,D='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 192 512"><path d="M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32H96c17.7 0 32 14.3 32 32V448h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H64V256H32c-17.7 0-32-14.3-32-32z"></path></svg>',U,A,k="ID",G,L,O;return{c(){e=element("div"),t=element("div"),n=element("div"),n.innerHTML=s,a=space(),o=element("h3"),o.textContent=u,c=space(),l=element("p"),h=text(r[0]),f=space(),d=element("div"),v=element("div"),v.innerHTML=g,b=space(),y=element("h3"),y.textContent=C,I=space(),p=element("p"),m=text(r[1]),w=space(),S=element("div"),T=element("div"),T.innerHTML=D,U=space(),A=element("h3"),A.textContent=k,G=space(),L=element("p"),O=text(r[2]),this.h()},l(P){e=claim_element(P,"DIV",{class:!0,id:!0});var _=children(e);t=claim_element(_,"DIV",{class:!0});var E=children(t);n=claim_element(E,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(n)!=="svelte-12349v5"&&(n.innerHTML=s),a=claim_space(E),o=claim_element(E,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(o)!=="svelte-l4zum1"&&(o.textContent=u),c=claim_space(E),l=claim_element(E,"P",{});var j=children(l);h=claim_text(j,r[0]),j.forEach(detach),E.forEach(detach),f=claim_space(_),d=claim_element(_,"DIV",{class:!0});var M=children(d);v=claim_element(M,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(v)!=="svelte-1hkk859"&&(v.innerHTML=g),b=claim_space(M),y=claim_element(M,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(y)!=="svelte-x6x93y"&&(y.textContent=C),I=claim_space(M),p=claim_element(M,"P",{});var R=children(p);m=claim_text(R,r[1]),R.forEach(detach),M.forEach(detach),w=claim_space(_),S=claim_element(_,"DIV",{class:!0});var q=children(S);T=claim_element(q,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-9kfb4j"&&(T.innerHTML=D),U=claim_space(q),A=claim_element(q,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(A)!=="svelte-1cscs3p"&&(A.textContent=k),G=claim_space(q),L=claim_element(q,"P",{});var F=children(L);O=claim_text(F,r[2]),F.forEach(detach),q.forEach(detach),_.forEach(detach),this.h()},h(){attr(n,"class","feature-icon d-inline-flex align-items-center justify-content-center fs-2 mb-3"),attr(o,"class","fs-2 text-body-emphasis"),attr(t,"class","feature col"),attr(v,"class","feature-icon d-inline-flex align-items-center justify-content-center fs-2 mb-3"),attr(y,"class","fs-2 text-body-emphasis"),attr(d,"class","feature col"),attr(T,"class","feature-icon d-inline-flex align-items-center justify-content-center fs-2 mb-3"),attr(A,"class","fs-2 text-body-emphasis"),attr(S,"class","feature col"),attr(e,"class","container my-5 text-center row mx-auto"),attr(e,"id","levels")},m(P,_){insert_hydration(P,e,_),append_hydration(e,t),append_hydration(t,n),append_hydration(t,a),append_hydration(t,o),append_hydration(t,c),append_hydration(t,l),append_hydration(l,h),append_hydration(e,f),append_hydration(e,d),append_hydration(d,v),append_hydration(d,b),append_hydration(d,y),append_hydration(d,I),append_hydration(d,p),append_hydration(p,m),append_hydration(e,w),append_hydration(e,S),append_hydration(S,T),append_hydration(S,U),append_hydration(S,A),append_hydration(S,G),append_hydration(S,L),append_hydration(L,O)},p(P,[_]){_&1&&set_data(h,P[0]),_&2&&set_data(m,P[1]),_&4&&set_data(O,P[2])},i:noop,o:noop,d(P){P&&detach(e)}}}function instance$1(r,e,t){let{level_name:n,creator:s,id:a}=e;return r.$$set=o=>{"level_name"in o&&t(0,n=o.level_name),"creator"in o&&t(1,s=o.creator),"id"in o&&t(2,a=o.id)},[n,s,a]}let Level$1=class extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{level_name:0,creator:1,id:2})}};const isServer=typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]"||typeof window=="object"&&"Deno"in window,USP=typeof URLSearchParams>"u"?eval("require")("url").URLSearchParams:URLSearchParams,SECRETS={db:"Wmfd2893gb7",account:"Wmfv3899gc9",moderator:"Wmfp3879gc3"};class GDRequestParams{constructor(e={}){this.data={gdw:0,gameVersion:21,binaryVersion:35,...e}}insertParams(e){return Object.assign(this.data,e)}authorize(e="db"){return this.data.secret=SECRETS[e],this.data}resolve(){return new USP(Object.keys(this.data).map(e=>[e,this.data[e].toString()]))}}const gdEncodeBase64=r=>btoa(r).replace(/\//g,"_").replace(/\+/g,"-"),gdDecodeBase64=r=>atob(r.replace(/_/g,"/").replace(/-/g,"+")),cipher=(r,e)=>String.fromCodePoint(...r.split("").map((t,n)=>t.charCodeAt(0)^e.charCodeAt(n%e.length))),encrypt=(r,e)=>gdEncodeBase64(cipher(r,e)),decrypt=(r,e)=>cipher(gdDecodeBase64(r),e),accountKey="37526",levelKey="26364",commentKey="29481",likeKey="58281",commentSalt="xPT6iUrtws0J",likeSalt="ysg6pUrtjn0J",genRS=()=>Math.random().toString(36).slice(2,12);var ch2={},wk=function(r,e,t,n,s){var a=new Worker(ch2[e]||(ch2[e]=URL.createObjectURL(new Blob([r+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(o){var u=o.data,c=u.$e$;if(c){var l=new Error(c[0]);l.code=c[1],l.stack=c[2],s(l,null)}else s(null,u)},a.postMessage(t,n),a},u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(r,e){for(var t=new u16(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var s=new u32(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)s[a]=a-t[n]<<5|n;return[t,s]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}var hMap=function(r,e,t){for(var n=r.length,s=0,a=new u16(e);s<n;++s)r[s]&&++a[r[s]-1];var o=new u16(e);for(s=0;s<e;++s)o[s]=o[s-1]+a[s-1]<<1;var u;if(t){u=new u16(1<<e);var c=15-e;for(s=0;s<n;++s)if(r[s])for(var l=s<<4|r[s],h=e-r[s],f=o[r[s]-1]++<<h,d=f|(1<<h)-1;f<=d;++f)u[rev[f]>>>c]=l}else for(u=new u16(n),s=0;s<n;++s)r[s]&&(u[s]=rev[o[r[s]-1]++]>>>15-r[s]);return u},flt=new u8(288);for(var i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(var i=0;i<32;++i)fdt[i]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},bits=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},bits16=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},shft=function(r){return(r+7)/8|0},slc=function(r,e,t){(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length);var n=new(r.BYTES_PER_ELEMENT==2?u16:r.BYTES_PER_ELEMENT==4?u32:u8)(t-e);return n.set(r.subarray(e,t)),n},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(r,e,t){var n=new Error(e||ec[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,err),!t)throw n;return n},inflt=function(r,e,t){var n=r.length;if(!n||t&&t.f&&!t.l)return e||new u8(0);var s=!e||t,a=!t||t.i;t||(t={}),e||(e=new u8(n*3));var o=function(N){var J=e.length;if(N>J){var Y=new u8(Math.max(J*2,N));Y.set(e),e=Y}},u=t.f||0,c=t.p||0,l=t.b||0,h=t.l,f=t.d,d=t.m,v=t.n,g=n*8;do{if(!h){u=bits(r,c,1);var b=bits(r,c+1,3);if(c+=3,b)if(b==1)h=flrm,f=fdrm,d=9,v=5;else if(b==2){var p=bits(r,c,31)+257,m=bits(r,c+10,15)+4,w=p+bits(r,c+5,31)+1;c+=14;for(var S=new u8(w),T=new u8(19),D=0;D<m;++D)T[clim[D]]=bits(r,c+D*3,7);c+=m*3;for(var U=max(T),A=(1<<U)-1,k=hMap(T,U,1),D=0;D<w;){var G=k[bits(r,c,A)];c+=G&15;var y=G>>>4;if(y<16)S[D++]=y;else{var L=0,O=0;for(y==16?(O=3+bits(r,c,3),c+=2,L=S[D-1]):y==17?(O=3+bits(r,c,7),c+=3):y==18&&(O=11+bits(r,c,127),c+=7);O--;)S[D++]=L}}var P=S.subarray(0,p),_=S.subarray(p);d=max(P),v=max(_),h=hMap(P,d,1),f=hMap(_,v,1)}else err(1);else{var y=shft(c)+4,C=r[y-4]|r[y-3]<<8,I=y+C;if(I>n){a&&err(0);break}s&&o(l+C),e.set(r.subarray(y,I),l),t.b=l+=C,t.p=c=I*8,t.f=u;continue}if(c>g){a&&err(0);break}}s&&o(l+131072);for(var E=(1<<d)-1,j=(1<<v)-1,M=c;;M=c){var L=h[bits16(r,c)&E],R=L>>>4;if(c+=L&15,c>g){a&&err(0);break}if(L||err(2),R<256)e[l++]=R;else if(R==256){M=c,h=null;break}else{var q=R-254;if(R>264){var D=R-257,F=fleb[D];q=bits(r,c,(1<<F)-1)+fl[D],c+=F}var z=f[bits16(r,c)&j],B=z>>>4;z||err(3),c+=z&15;var _=fd[B];if(B>3){var F=fdeb[B];_+=bits16(r,c)&(1<<F)-1,c+=F}if(c>g){a&&err(0);break}s&&o(l+131072);for(var H=l+q;l<H;l+=4)e[l]=e[l-_],e[l+1]=e[l+1-_],e[l+2]=e[l+2-_],e[l+3]=e[l+3-_];l=H}}t.l=h,t.p=M,t.b=l,t.f=u,h&&(u=1,t.m=d,t.d=f,t.n=v)}while(!u);return l==e.length?e:slc(e,0,l)},et=new u8(0),mrg=function(r,e){var t={};for(var n in r)t[n]=r[n];for(var n in e)t[n]=e[n];return t},wcln=function(r,e,t){for(var n=r(),s=r.toString(),a=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<n.length;++o){var u=n[o],c=a[o];if(typeof u=="function"){e+=";"+c+"=";var l=u.toString();if(u.prototype)if(l.indexOf("[native code]")!=-1){var h=l.indexOf(" ",8)+1;e+=l.slice(h,l.indexOf("(",h))}else{e+=l;for(var f in u.prototype)e+=";"+c+".prototype."+f+"="+u.prototype[f].toString()}else e+=l}else t[c]=u}return[e,t]},ch=[],cbfs=function(r){var e=[];for(var t in r)r[t].buffer&&e.push((r[t]=new r[t].constructor(r[t])).buffer);return e},wrkr=function(r,e,t,n){var s;if(!ch[t]){for(var a="",o={},u=r.length-1,c=0;c<u;++c)s=wcln(r[c],a,o),a=s[0],o=s[1];ch[t]=wcln(r[u],a,o)}var l=mrg({},ch[t][1]);return wk(ch[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,l,cbfs(l),n)},bInflt=function(){return[u8,u16,u32,fleb,fdeb,clim,fl,fd,flrm,fdrm,rev,ec,hMap,max,bits,bits16,shft,slc,err,inflt,inflateSync,pbf,gu8]},guze=function(){return[gzs,gzl]},zule=function(){return[zlv]},pbf=function(r){return postMessage(r,[r.buffer])},gu8=function(r){return r&&r.size&&new u8(r.size)},cbify=function(r,e,t,n,s,a){var o=wrkr(t,n,s,function(u,c){o.terminate(),a(u,c)});return o.postMessage([r,e],e.consume?[r.buffer]:[]),function(){o.terminate()}},gzs=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&err(6,"invalid gzip data");var e=r[3],t=10;e&4&&(t+=r[10]|(r[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!r[t++]);return t+(e&2)},gzl=function(r){var e=r.length;return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0},zlv=function(r){((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)&&err(6,"invalid zlib data"),r[1]&32&&err(6,"invalid zlib data: preset dictionaries not supported")};function inflate(r,e,t){return t||(t=e,e={}),typeof t!="function"&&err(7),cbify(r,e,[bInflt],function(n){return pbf(inflateSync(n.data[0],gu8(n.data[1])))},1,t)}function inflateSync(r,e){return inflt(r,e)}function gunzip(r,e,t){return t||(t=e,e={}),typeof t!="function"&&err(7),cbify(r,e,[bInflt,guze,function(){return[gunzipSync]}],function(n){return pbf(gunzipSync(n.data[0]))},3,t)}function gunzipSync(r,e){return inflt(r.subarray(gzs(r),-8),e||new u8(gzl(r)))}function unzlib(r,e,t){return t||(t=e,e={}),typeof t!="function"&&err(7),cbify(r,e,[bInflt,zule,function(){return[unzlibSync]}],function(n){return pbf(unzlibSync(n.data[0],gu8(n.data[1])))},5,t)}function unzlibSync(r,e){return inflt((zlv(r),r.subarray(2,-4)),e)}function decompress$2(r,e,t){return t||(t=e,e={}),typeof t!="function"&&err(7),r[0]==31&&r[1]==139&&r[2]==8?gunzip(r,e,t):(r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31?inflate(r,e,t):unzlib(r,e,t)}var te=typeof TextEncoder<"u"&&new TextEncoder,td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(r){}var dutf8=function(r){for(var e="",t=0;;){var n=r[t++],s=(n>127)+(n>223)+(n>239);if(t+s>r.length)return[e,slc(r,t-1)];s?s==3?(n=((n&15)<<18|(r[t++]&63)<<12|(r[t++]&63)<<6|r[t++]&63)-65536,e+=String.fromCharCode(55296|n>>10,56320|n&1023)):s&1?e+=String.fromCharCode((n&31)<<6|r[t++]&63):e+=String.fromCharCode((n&15)<<12|(r[t++]&63)<<6|r[t++]&63):e+=String.fromCharCode(n)}};function strToU8(r,e){if(e){for(var t=new u8(r.length),n=0;n<r.length;++n)t[n]=r.charCodeAt(n);return t}if(te)return te.encode(r);for(var s=r.length,a=new u8(r.length+(r.length>>1)),o=0,u=function(h){a[o++]=h},n=0;n<s;++n){if(o+5>a.length){var c=new u8(o+8+(s-n<<1));c.set(a),a=c}var l=r.charCodeAt(n);l<128||e?u(l):l<2048?(u(192|l>>6),u(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|r.charCodeAt(++n)&1023,u(240|l>>18),u(128|l>>12&63),u(128|l>>6&63),u(128|l&63)):(u(224|l>>12),u(128|l>>6&63),u(128|l&63))}return slc(a,0,o)}function strFromU8(r,e){if(e){for(var t="",n=0;n<r.length;n+=16384)t+=String.fromCharCode.apply(null,r.subarray(n,n+16384));return t}else{if(td)return td.decode(r);var s=dutf8(r),a=s[0],o=s[1];return o.length&&err(8),a}}const decompress$1=r=>new Promise((e,t)=>decompress$2(r,{consume:!0},(n,s)=>n?t(n):e(s))),b64ToU8=r=>strToU8(gdDecodeBase64(r),!0),u8ToStr=r=>strFromU8(r,!0),decompress=r=>decompress$1(b64ToU8(r)).then(u8ToStr),udid=Math.random().toString(36).slice(2,18),uuid=udid,defaultSplitter=":",parse=(r,e=defaultSplitter)=>{const t=r.split(e),n={};for(let s=0;s<t.length;s+=2)n[t[s]]=t[s+1];return n},parseObject=r=>{const e=r.split(","),t={};for(let n=0;n<e.length;n+=2)t[e[n]]=+e[n+1];return t};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var duration={};Object.defineProperty(duration,"__esModule",{value:!0});var Duration=function(){function r(e){if(this.milliSeconds=0,!!e){var t=e.split(/([0-9]+\.?[0-9]*)/),n=Number(t[1]);if(isNaN(n)||t[2].length===0)throw new Error("Error in input: '"+e+"'");var s=t[2].trim().toLowerCase();switch(s){case"nanosecond":case"nanoseconds":this.NanoSeconds=n;return;case"microsecond":case"microseconds":this.MicroSeconds=n;return;case"millisecond":case"milliseconds":this.MilliSeconds=n;return;case"second":case"seconds":this.Seconds=n;return;case"minute":case"minutes":this.Minutes=n;return;case"hour":case"hours":this.Hours=n;return;case"day":case"days":this.Days=n;return;case"week":case"weeks":this.Weeks=n;return;case"month":case"months":this.Months=n;return;case"year":case"years":this.Years=n;return;case"decade":case"decades":this.Decades=n;return;case"century":case"centuries":this.Centuries=n;return;case"millennium":case"millenniums":case"millennia":this.Millenniums=n;return;default:throw new Error("Error in input: '"+e+"'")}}}return Object.defineProperty(r.prototype,"NanoSeconds",{get:function(){return this.MicroSeconds*1e3},set:function(e){this.MicroSeconds=e/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"MicroSeconds",{get:function(){return this.milliSeconds*1e3},set:function(e){this.milliSeconds=e/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"MilliSeconds",{get:function(){return this.milliSeconds},set:function(e){this.milliSeconds=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Seconds",{get:function(){return this.MilliSeconds/1e3},set:function(e){this.MilliSeconds=e*1e3},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Minutes",{get:function(){return this.Seconds/60},set:function(e){this.Seconds=e*60},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Hours",{get:function(){return this.Minutes/60},set:function(e){this.Minutes=e*60},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Days",{get:function(){return this.Hours/24},set:function(e){this.Hours=e*24},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Weeks",{get:function(){return this.Days/7},set:function(e){this.Days=e*7},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Months",{get:function(){return this.Years*12},set:function(e){this.Years=e/12},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Years",{get:function(){return this.Days/365},set:function(e){this.Days=e*365},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Decades",{get:function(){return this.Years/10},set:function(e){this.Years=e*10},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Centuries",{get:function(){return this.Decades/10},set:function(e){this.Decades=e*10},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Millenniums",{get:function(){return this.Centuries/10},set:function(e){this.Centuries=e*10},enumerable:!0,configurable:!0}),r.fromNanoseconds=function(e){var t=new r;return t.NanoSeconds=e,t},r.fromMicroSeconds=function(e){var t=new r;return t.MicroSeconds=e,t},r.fromMilliseconds=function(e){var t=new r;return t.MilliSeconds=e,t},r.fromSeconds=function(e){var t=new r;return t.Seconds=e,t},r.fromMinutes=function(e){var t=new r;return t.Minutes=e,t},r.fromHours=function(e){var t=new r;return t.Hours=e,t},r.fromDays=function(e){var t=new r;return t.Days=e,t},r.fromWeeks=function(e){var t=new r;return t.Weeks=e,t},r.fromMonths=function(e){var t=new r;return t.Months=e,t},r.fromYears=function(e){var t=new r;return t.Years=e,t},r.fromDecades=function(e){var t=new r;return t.Decades=e,t},r.fromCenturies=function(e){var t=new r;return t.Centuries=e,t},r.fromMillenniums=function(e){var t=new r;return t.Millenniums=e,t},r.between=function(e,t){var n=new r,s=e instanceof Date?e.getTime():e,a=t instanceof Date?t.getTime():t;return n.MilliSeconds=Math.abs(s-a),n},r.getters=function(){return["NanoSeconds","MicroSeconds","MilliSeconds","Seconds","Minutes","Hours","Days","Weeks","Months","Years","Decades","Centuries","Millenniums"]},r.isSingular=function(e){return e%100!==11&&e%10===1},r.toSingular=function(e){return e.replace(/ies$/,"y").replace(/s$/,"")},r.prototype.toString=function(){for(var e=0,t=r.getters().reverse();e<t.length;e++){var n=t[e],s=this[n];if(s>=1){var a=r.isSingular(s)?r.toSingular(n):n,o=s.toLocaleString(void 0,{maximumFractionDigits:2});return o+" "+a.toLowerCase()}}return this.MicroSeconds+" microseconds"},r}(),Duration_1=duration.Duration=Duration;const generateDate=r=>{let e=new Date(r);return e.getTime()||(e=new Date(Date.now()-new Duration_1(r).MilliSeconds)),{pretty:r,date:e}};class Creator{constructor(e){this._client=e}}class SongAuthor{constructor(e,t){this.name=e,this.id=t}}const DEFAULT_SONGS=[["Stay Inside Me","OcularNebula"],["Stereo Madness","ForeverBound"],["Back on Track","DJVI"],["Polargeist","Step"],["Dry Out","DJVI"],["Base After Base","DJVI"],["Can't Let Go","DJVI"],["Jumper","Waterflame"],["Time Machine","Waterflame"],["Cycles","DJVI"],["xStep","DJVI"],["Clutterfunk","Waterflame"],["Theory of Everything","DJ-Nate"],["Electroman Adventures","Waterflame"],["Clubstep","DJ-Nate"],["Electrodynamix","DJ-Nate"],["Hexagon Force","Waterflame"],["Blast Processing","Waterflame"],["Theory of Everything 2","DJ-Nate"],["Geometrical Dominator","Waterflame"],["Deadlocked","F-777"],["Fingerdash","MDK"],["The Seven Seas","F-777"],["Viking Arena","F-777"],["Airborne Robots","F-777"],["The Challenge","RobTop"],["Payload","Dex Arson"],["Beast Mode","Dex Arson"],["Machina","Dex Arson"],["Years","Dex Arson"],["Frontlines","Dex Arson"],["Space Pirates","Waterflame"],["Striker","Waterflame"],["Round 1","Dex Arson"],["Embers","Dex Arson"],["Monster Dance Off","F-777"],["Press Start","MDK"],["Nock Em","Bossfight"],["Power Trip","Boom Kitty"]];class DefaultSong{constructor(e,t){this._creator=e,this.isCustom=!1,t+=1;const n=DEFAULT_SONGS[t];this.id=t,this.name=n[0],this.authorName=n[1]}}class CustomSong{constructor(e,t){this._creator=e,this.isCustom=!0,this.id=+t[1],this.name=t[2],this.author=new SongAuthor(t[4],+t[3]),this.size={raw:Math.floor(+t[5]*1048576),pretty:t[5]+" MB"},this.url=decodeURIComponent(t[10])}}const DIFFICULTY_MAP={[-1]:"N/A",0:"Auto",1:"Easy",2:"Normal",3:"Hard",4:"Harder",5:"Insane"},DEMON_DIFFICULTY_MAP={0:"Any",1:"Easy Demon",2:"Medium Demon",3:"Hard Demon",4:"Insane Demon",5:"Extreme Demon"},getDifficulty=(r,e)=>{const t=e==="auto"?0:r===0?-1:r/10;return{raw:t,pretty:e==="demon"?DEMON_DIFFICULTY_MAP[t]:DIFFICULTY_MAP[t]}},AWARDS=["None","Star","Feature","Epic"],ORBS=[0,0,50,75,125,175,225,275,350,425,500],getAward=(r,e,t)=>{if(e>0){const s=t?3:2;return{raw:s,position:e,pretty:AWARDS[s]}}const n=r?1:0;return{raw:n,pretty:AWARDS[n]}},LEVEL_LENGTH_MAP={0:"Tiny",1:"Short",2:"Medium",3:"Long",4:"XL"},getLevelLength=r=>({raw:r,pretty:LEVEL_LENGTH_MAP[r]});class SearchedLevel{constructor(e,t,n,s){this._creator=e;const a=typeof t=="string"?parse(t):t;this.name=a[2],this.id=+a[1],this.version=+a[5],this.gameVersion=+a[13];const o=a[35];this.song=o==="0"?new DefaultSong(e,+a[12]):new CustomSong(e,this._songData=s.find(l=>o===l[1])),this.description=gdDecodeBase64(a[3]);const u=this._userData=n.find(l=>l[0]===a[6])||[];this.creator={id:+a[6]},u.length&&(this.creator.accountID=+u[2]),this.difficulty={stars:+a[18],level:getDifficulty(+a[9],a[17]?"demon":a[25]?"auto":void 0),requestedStars:+a[39]},this.stats={likes:+a[14],downloads:+a[10],objects:+a[45],length:getLevelLength(+a[15])},this.coins={count:+a[37]},this.coins.count>0&&(this.coins.areSilver=!!+a[38]),this.award=getAward(this.difficulty.stars>0,+a[19],!!+a[42]),this.orbs=ORBS[this.difficulty.stars],this.diamonds=this.difficulty.stars<2?0:this.difficulty.stars+2;const c=+a[30];c&&(this.original=c)}async resolve(){const e=new GDRequestParams({levelID:this.id,inc:1,extras:0});return e.authorize("db"),new Level(this._creator,await this._creator._client.req("/downloadGJLevel22.php",{method:"POST",body:e}),this._userData,this._songData)}async getCreator(){return this.creator.accountID?await this._creator._client.users.getByAccountID(this.creator.id):null}async getComments(e=!1,t){let n=!1;t||(t=1,n=!0);const s=new GDRequestParams({count:t,levelID:this.id,mode:+e,page:0,total:0});s.authorize("db");const a=await this._creator._client.req("/getGJComments21.php",{method:"POST",body:s});if(a==="-1")return n?null:[];const o=a.slice(0,a.indexOf("#")).split("|").map(u=>{const[c,l]=u.split(":");return new LevelComment(this._creator._client.users,new StatlessSearchedUser(this._creator._client.users,l),"1~"+this.id+"~"+c)});return n?o[0]:o}}class Level extends SearchedLevel{constructor(e,t,n,s){const a=parse(t.slice(0,t.indexOf("#")));super(e,a,[n],[s]),this.uploadedAt=generateDate(a[28]),this.updatedAt=generateDate(a[29]),a[27]==="0"?this.copy={copyable:!1}:(this.copy={copyable:!0},a[27]!=="1"&&(this.copy.password=(+decrypt(a[27],levelKey).slice(1)).toString().padStart(4,"0"))),this.data=a[4]}async decodeData(e){const t=await decompress(this.data);if(e){const[n,...s]=t.split(";");return{raw:t,parsed:{meta:parse(n,","),objects:s.map(parseObject)}}}return{raw:t}}}class LoggedInSearchedLevel extends SearchedLevel{constructor(e,t,n,s,a){super(e,n,s,a),this.creator=t}async getCreator(){return this.creator}async resolve(){const e=new GDRequestParams({levelID:this.id,inc:1,extras:0});return e.authorize("db"),new LoggedInLevel(this._creator,this.creator,await this._creator._client.req("/downloadGJLevel22.php",{method:"POST",body:e}),this._userData,this._songData)}async updateDescription(e){const t=await this.creator.updateLevelDescription(this,e);return t&&(this.description=e),t}}class LoggedInLevel extends LoggedInSearchedLevel{constructor(e,t,n,s,a){const o=parse(n.slice(0,n.indexOf("#")));super(e,t,n,[s],[a]),this.uploadedAt=generateDate(o[28]),this.updatedAt=generateDate(o[29]),o[27]==="0"?this.copy={copyable:!1}:(this.copy={copyable:!0},o[27]!=="1"&&(this.copy.password=(+decrypt(o[27],levelKey).slice(1)).toString().padStart(4,"0"))),this.data=o[4]}}Object.defineProperty(LoggedInLevel.prototype,"decodeData",Object.getOwnPropertyDescriptor(Level.prototype,"decodeData"));const ORDER_MAP={likes:0,downloads:1,trending:3,recent:4,featured:6,magic:7,awarded:11,hof:16},DIFFICULTY_KEYS=Object.keys(DIFFICULTY_MAP).map(r=>+r),DEMON_DIFFICULTY_KEYS=Object.keys(DEMON_DIFFICULTY_MAP).map(r=>+r),LENGTH_KEYS=Object.keys(LEVEL_LENGTH_MAP),diffToString=(r,e)=>r?r instanceof Array?e?["-2",r.length>0?diffToString(r[0],!0)[1]:0]:[r.map(t=>diffToString(t,!0)[0]).join(",")||"-"]:(e===void 0&&(e=typeof r=="string"&&r.toLowerCase().includes("demon")),e?["-2",typeof r=="number"?r:DEMON_DIFFICULTY_KEYS.find(t=>DEMON_DIFFICULTY_MAP[t].toLowerCase()===r.toLowerCase())]:(typeof r!="number"&&(r=DIFFICULTY_KEYS.find(t=>DIFFICULTY_MAP[t].toLowerCase()===r.toLowerCase())),[r===-1?"0":r===0?"-3":r.toString()||"-"])):e?["-2",0]:["-"],lengthToString=r=>r?r instanceof Array?r.map(lengthToString).join(","):typeof r=="number"?r.toString():LENGTH_KEYS.find(e=>LEVEL_LENGTH_MAP[e].toLowerCase()===r.toLowerCase())||"-":"-",awardToParams=r=>[3,"Epic","epic"].includes(r)?{epic:1,featured:1}:[2,"Feature","feature"].includes(r)?{featured:1}:{},orderToInt=r=>typeof r=="number"?r:ORDER_MAP[r],getSearchParams=({query:r="",difficulty:e,orderBy:t=0,demon:n,award:s,length:a,original:o=!1,twoPlayer:u=!1,coins:c=!1})=>{typeof r=="number"?r=r.toString():r instanceof Array&&(r=r.join(","));const[l,h]=diffToString(e,n),f=lengthToString(a),d=orderToInt(t),v=awardToParams(s),g=new GDRequestParams({str:r,diff:l,len:f,type:d,...v});return h&&g.insertParams({demonFilter:h}),o&&g.insertParams({original:1}),u&&g.insertParams({twoPlayer:1}),c&&g.insertParams({coins:1}),g.authorize("db"),g};class LevelCreator extends Creator{async get(e,t=!1){const n=await this.search({query:e});return t?await n.resolve():n}async byCreator(e,t={},n){const s=!n;s&&(n=1);let a=e;typeof e!="number"&&(a=e.id);const o=getSearchParams({query:""+a,orderBy:5,...t}),u=Math.ceil(n/10),c=[];for(let l=0;l<u;l++){o.insertParams({page:l});const h=await this._client.req("/getGJLevels21.php",{method:"POST",body:o});if(h==="-1")return s?null:c;const[f,d,v]=h.split("#"),g=d.split("|").map(y=>y.split(":")),b=v.split("~:~").map(y=>parse(y,"~|~"));c.push(...f.split("|").map(y=>e instanceof LoggedInUser?new LoggedInSearchedLevel(this,e,y,g,b):new SearchedLevel(this,y,g,b)))}return s?c[0]:c.slice(0,n)}async search(e,t){const n=!t;n&&(t=1);const s=getSearchParams(e),a=Math.ceil(t/10),o=[];for(let u=0;u<a;u++){s.insertParams({page:u});const c=await this._client.req("/getGJLevels21.php",{method:"POST",body:s});if(c==="-1")return n?null:o;const[l,h,f]=c.split("#"),d=h.split("|").map(g=>g.split(":")),v=f.split("~:~").map(g=>parse(g,"~|~"));o.push(...l.split("|").map(g=>new SearchedLevel(this,g,d,v)))}return n?o[0]:o.slice(0,t)}}var sha1$1={exports:{}},crypt={exports:{}};(function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,n){return t<<n|t>>>32-n},rotr:function(t,n){return t<<32-n|t>>>n},endian:function(t){if(t.constructor==Number)return e.rotl(t,8)&16711935|e.rotl(t,24)&4278255360;for(var n=0;n<t.length;n++)t[n]=e.endian(t[n]);return t},randomBytes:function(t){for(var n=[];t>0;t--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(t){for(var n=[],s=0,a=0;s<t.length;s++,a+=8)n[a>>>5]|=t[s]<<24-a%32;return n},wordsToBytes:function(t){for(var n=[],s=0;s<t.length*32;s+=8)n.push(t[s>>>5]>>>24-s%32&255);return n},bytesToHex:function(t){for(var n=[],s=0;s<t.length;s++)n.push((t[s]>>>4).toString(16)),n.push((t[s]&15).toString(16));return n.join("")},hexToBytes:function(t){for(var n=[],s=0;s<t.length;s+=2)n.push(parseInt(t.substr(s,2),16));return n},bytesToBase64:function(t){for(var n=[],s=0;s<t.length;s+=3)for(var a=t[s]<<16|t[s+1]<<8|t[s+2],o=0;o<4;o++)s*8+o*6<=t.length*8?n.push(r.charAt(a>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],s=0,a=0;s<t.length;a=++s%4)a!=0&&n.push((r.indexOf(t.charAt(s-1))&Math.pow(2,-2*a+8)-1)<<a*2|r.indexOf(t.charAt(s))>>>6-a*2);return n}};crypt.exports=e})();var cryptExports=crypt.exports,charenc={utf8:{stringToBytes:function(r){return charenc.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(charenc.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var e=[],t=0;t<r.length;t++)e.push(r.charCodeAt(t)&255);return e},bytesToString:function(r){for(var e=[],t=0;t<r.length;t++)e.push(String.fromCharCode(r[t]));return e.join("")}}},charenc_1=charenc;(function(){var r=cryptExports,e=charenc_1.utf8,t=charenc_1.bin,n=function(a){a.constructor==String?a=e.stringToBytes(a):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString());var o=r.bytesToWords(a),u=a.length*8,c=[],l=1732584193,h=-271733879,f=-1732584194,d=271733878,v=-1009589776;o[u>>5]|=128<<24-u%32,o[(u+64>>>9<<4)+15]=u;for(var g=0;g<o.length;g+=16){for(var b=l,y=h,C=f,I=d,p=v,m=0;m<80;m++){if(m<16)c[m]=o[g+m];else{var w=c[m-3]^c[m-8]^c[m-14]^c[m-16];c[m]=w<<1|w>>>31}var S=(l<<5|l>>>27)+v+(c[m]>>>0)+(m<20?(h&f|~h&d)+1518500249:m<40?(h^f^d)+1859775393:m<60?(h&f|h&d|f&d)-1894007588:(h^f^d)-899497514);v=d,d=f,f=h<<30|h>>>2,h=l,l=S}l+=b,h+=y,f+=C,d+=I,v+=p}return[l,h,f,d,v]},s=function(a,o){var u=r.wordsToBytes(n(a));return o&&o.asBytes?u:o&&o.asString?t.bytesToString(u):r.bytesToHex(u)};s._blocksize=16,s._digestsize=20,sha1$1.exports=s})();var sha1Exports=sha1$1.exports;const sha1=getDefaultExportFromCjs(sha1Exports),convertToAccountID=async(r,e)=>typeof e=="string"?(await r.get(e)).accountID:e instanceof StatlessSearchedUser||e instanceof User?e.accountID:e;class Comment{constructor(e){this.text=gdDecodeBase64(e[2]),this.createdAt=generateDate(e[9]),this.id=+e[6],this.likes=+e[4],this.isSpam=!!+e[7]}}class AccountComment extends Comment{constructor(e,t){super(parse(t,"~")),this.author=e}}class LoggedInAccountComment extends AccountComment{async delete(){return this.author.deleteAccountComment(this)}}class LevelComment extends Comment{constructor(e,t,n){const s=parse(n,"~");super(s),this.author=t,this._creator=e,this.levelID=+s[1],s[10]!=="0"&&(this.percent=+s[10])}async getLevel(e=!1){const t=await this._creator._client.levels.get(this.levelID);return e?t.resolve():t}}class LoggedInLevelComment extends LevelComment{async delete(){return await this.author.deleteComment(this)}}class FriendRequest{constructor(e){this.id=+e[32],this.msg=gdDecodeBase64(e[35]),this.read=!+e[41]}}class OutgoingFriendRequest extends FriendRequest{constructor(e,t,n){const s=parse(n);super(s),this.from=e,this.to=new StatlessSearchedUser(t,n)}async cancel(){return this.from.cancelFriendRequest(this)}}class IncomingFriendRequest extends FriendRequest{constructor(e,t,n){const s=parse(n);super(s),this.to=e,this.from=new StatlessSearchedUser(t,n)}async markAsRead(){return this.read||await this.to.markFriendRequestAsRead(this)}async accept(){return this.to.acceptFriendRequest(this)}async reject(){return this.to.rejectFriendRequest(this)}}class SearchedMessage{constructor(e,t){const n=typeof t=="string"?parse(t):t;this.id=+n[1];const s={username:n[6],id:+n[3],accountID:+n[2]},a=!!+n[9];this.from=a?e:s,this.to=a?s:e,this.outgoing=a,this.subject=gdDecodeBase64(n[4]),this.sentAt=generateDate(n[7]),this.read=!+n[8]}async delete(){return await(this.outgoing?this.from:this.to).deleteMessage(this)}async resolve(){return await(this.outgoing?this.from:this.to).getFullMessage(this)}}class Message extends SearchedMessage{constructor(e,t){const n=parse(t);super(e,n),this.body=gdDecodeBase64(n[5])}}const colors=["#7dff00","#00ff00","#00ff7d","#00ffff","#007dff","#0000ff","#7d00ff","#ff00ff","#ff007d","#ff0000","#ff7d00","#ffff00","#ffffff","#b900ff","#ffb900","#000000","#00c8ff","#afafaf","#5a5a5a","#ff7d7d","#00af4b","#007d7d","#004baf","#4b00af","#7d007d","#af004b","#af4b00","#7d7d00","#4baf00","#ff4b00","#963200","#966400","#649600","#009664","#006496","#640096","#960064","#960000","#009600","#000096","#7dffaf","#7d7dff"],userColor=r=>({raw:r,parsed:colors[r]}),PERMISSIONS=["User","Moderator","Elder Moderator"],generatePermission=r=>({raw:r,pretty:PERMISSIONS[r]}),SOCIALMAP={youtube:"https://youtube.com/channel/",twitch:"https://twitch.tv/",twitter:"https://twitter.com/"},generateSocial=(r,e)=>({path:r,fullURL:SOCIALMAP[e]+r});class UserCosmetics{constructor(e,t,n,s,a,o,u,c,l,h,f){this._creator=e,this.cube=t,this.ship=n,this.ball=s,this.ufo=a,this.wave=o,this.robot=u,this.glow=c,this.spider=l,this.colors=f,isNaN(h)||(this.explosion=h)}async renderIcon(e="cube",t=!1){const n=[["form",e],["icon",this[e].toString()],["col1",this.colors.primary.raw.toString()],["col2",this.colors.secondary.raw.toString()],["glow",this.glow.toString()],["noUser","1"]].map(([a,o])=>a+"="+o).join("&"),s=await this._creator._client.req(`https://gdbrowser.com/icon/gd.js?${n}`,{},!0);return t?s:s.arrayBuffer()}}class User{constructor(e,t){this._creator=e;const n=parse(t);this.username=n[1],this.id=+n[2],this.accountID=+n[16],this.stats={stars:+n[3],diamonds:+n[46],demons:+n[4],rank:+n[30],coins:{normal:+n[13],user:+n[17]},cp:+n[8]};const s={};n[20]&&(s.youtube=generateSocial(n[20],"youtube")),n[44]&&(s.twitter=generateSocial(n[44],"twitter")),n[45]&&(s.twitch=generateSocial(n[45],"twitch")),this.socials=s,this.cosmetics=new UserCosmetics(e,+n[21],+n[22],+n[23],+n[24],+n[25],+n[26],+n[28],+n[43],+n[47],{primary:userColor(+n[10]),secondary:userColor(+n[11])}),this.permissions=generatePermission(+n[49])}async getAccountComments(e){let t=!1;e||(e=1,t=!0);const n=Math.ceil(e/10),s=[];for(let a=0;a<n;a++){const o=new GDRequestParams({accountID:this.accountID,page:a,total:0});o.authorize("db");const u=await this._creator._client.req("/getGJAccountComments20.php",{method:"POST",body:o});if(u==="-1")return t?null:[];const c=u.slice(0,u.indexOf("#")).split("|");if(s.push(...c.map(l=>this instanceof LoggedInUser?new LoggedInAccountComment(this,l):new AccountComment(this,l))),c.length<10)break}return t?s[0]||null:s.slice(0,e)}async getComments(e=!1,t){let n=!1;t||(t=1,n=!0);const s=new GDRequestParams({count:t,userID:this.id,mode:+e,page:0,total:0});s.authorize("db");const a=await this._creator._client.req("/getGJCommentHistory.php",{method:"POST",body:s});if(a==="-1")return n?null:[];const o=a.slice(0,a.indexOf("#")).split("|").map(u=>{const c=u.slice(0,u.indexOf(":"));return this instanceof LoggedInUser?new LoggedInLevelComment(this._creator,this,c):new LevelComment(this._creator,this,c)});return n?o[0]:o}async getLevels(e){return this._creator._client.levels.byCreator(this,{},e)}}const like=async(r,e,t,n,s,a,o)=>{const u=genRS(),c=+n,l=encrypt(sha1(""+e+r+c+t+u+s+udid+uuid+likeSalt),likeKey),h=new GDRequestParams({accountID:s,gjp:a,type:t,special:e,itemID:r,like:c,udid,uuid,rs:u,chk:l});return h.authorize("db"),await o.req("/likeGJItem211.php",{method:"POST",body:h})==="1"};class LoggedInUser extends User{constructor(e,t,n){super(e,t),this._creds=n}async postAccountComment(e){const t=gdEncodeBase64(e),n=new GDRequestParams({...this._creds,comment:t});n.authorize("db");const s=await this._creator._client.req("/uploadGJAccComment20.php",{method:"POST",body:n});return s==="-1"?null:new LoggedInAccountComment(this,`2~${t}~9~0 seconds~6~${s}~4~0~7~0`)}async postComment(e,t,n){e instanceof SearchedLevel&&(e=e.id),n||(n=0);const s=gdEncodeBase64(t),a=encrypt(sha1(this._creds.userName+s+e+n+"0"+commentSalt),commentKey),o=new GDRequestParams({...this._creds,levelID:e,comment:s,percent:n,chk:a});o.authorize("db");const u=await this._creator._client.req("/uploadGJComment21.php",{method:"POST",body:o});return u==="-1"?null:new LoggedInLevelComment(this._creator,this,`2~${s}~9~0 seconds~6~${u}~4~0~7~0~10~${n}`)}async deleteAccountComment(e){if(e instanceof AccountComment){if(e.author.accountID!==this.accountID)return!1;e=e.id}const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,commentID:e});return t.authorize("db"),await this._creator._client.req("/deleteGJAccComment20.php",{method:"POST",body:t})==="1"}async deleteComment(e,t){if(e instanceof LevelComment){if(e.author.accountID!==this.accountID)return!1;t=e.levelID,e=e.id}else t instanceof SearchedLevel&&(t=t.id);const n=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,commentID:e,levelID:t});return n.authorize("db"),await this._creator._client.req("/deleteGJComment20.php",{method:"POST",body:n})==="1"}async sendFriendRequest(e,t=""){const n=await convertToAccountID(this._creator,e),s=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,toAccountID:n,comment:gdEncodeBase64(t)});return s.authorize("db"),await this._creator._client.req("/uploadFriendRequest20.php",{method:"POST",body:s})==="1"}async sendMessage(e,t,n){const s=await convertToAccountID(this._creator,e),a=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,toAccountID:s,subject:gdEncodeBase64(t),body:gdEncodeBase64(n)});return a.authorize("db"),await this._creator._client.req("/uploadGJMessage20.php",{method:"POST",body:a})==="1"}async getFriendRequests(e=10,t=!1){const n=Math.ceil(e/10),s=[];for(let a=0;a<n;a++){const o=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,page:a,getSent:+t,total:0});o.authorize("db");const u=await this._creator._client.req("/getGJFriendRequests20.php",{method:"POST",body:o});if(["-1","-2"].includes(u))return s;const c=u.slice(0,u.indexOf("#")).split("|");if(s.push(...c.map(l=>t?new OutgoingFriendRequest(this,this._creator,l):new IncomingFriendRequest(this,this._creator,l))),c.length<10)break}return s.slice(0,e)}async getMessages(e=10,t=!1){const n=Math.ceil(e/10),s=[];for(let a=0;a<n;a++){const o=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,page:a,getSent:+t,total:0});o.authorize("db");const u=await this._creator._client.req("/getGJMessages20.php",{method:"POST",body:o});if(["-1","-2"].includes(u))return s;const c=u.slice(0,u.indexOf("#")).split("|");if(s.push(...c.map(l=>t?new SearchedMessage(this,l):new SearchedMessage(this,l))),c.length<10)break}return s.slice(0,e)}async getFullMessage(e,t){if(e instanceof SearchedMessage){if((e.outgoing?e.from:e.to).accountID!==this.accountID)return null;t=e.outgoing,e=e.id}const n=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,messageID:e,isSender:+t});n.authorize("db");const s=await this._creator._client.req("/downloadGJMessage20.php",{method:"POST",body:n});return s==="-1"?null:new Message(this,s)}async deleteMessage(e,t){if(e instanceof SearchedMessage){if((e.outgoing?e.from:e.to).accountID!==this.accountID)return!1;t=e.outgoing,e=e.id}const n=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,messageID:e,isSender:+t});return n.authorize("db"),await this._creator._client.req("/deleteGJMessages20.php",{method:"POST",body:n})==="1"}async markFriendRequestAsRead(e){if(e.to.accountID!==this.accountID)return!1;const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,requestID:e.id});return t.authorize("db"),e.read=await this._creator._client.req("/readGJFriendRequest20.php",{method:"POST",body:t})==="1"}async acceptFriendRequest(e){if(e.to.accountID!==this.accountID)return!1;const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,requestID:e.id,targetAccountID:e.from.accountID});return t.authorize("db"),await this._creator._client.req("/acceptGJFriendRequest20.php",{method:"POST",body:t})==="1"}async rejectFriendRequest(e){if(e.to.accountID!==this.accountID)return!1;const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,targetAccountID:e.from.accountID,isSender:0});return t.authorize("db"),await this._creator._client.req("/deleteGJFriendRequests20.php",{method:"POST",body:t})==="1"}async unfriend(e){const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,targetAccountID:await convertToAccountID(this._creator,e)});return t.authorize("db"),await this._creator._client.req("/removeGJFriend20.php",{method:"POST",body:t})==="1"}async cancelFriendRequest(e){if(e.from.accountID!==this.accountID)return!1;const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,targetAccountID:e.to.accountID,isSender:1});return t.authorize("db"),await this._creator._client.req("/deleteGJFriendRequests20.php",{method:"POST",body:t})==="1"}async block(e){const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,targetAccountID:await convertToAccountID(this._creator,e)});return t.authorize("db"),await this._creator._client.req("/blockGJUser20.php",{method:"POST",body:t})==="1"}async unblock(e){const t=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,targetAccountID:await convertToAccountID(this._creator,e)});return t.authorize("db"),await this._creator._client.req("/unblockGJUser20.php",{method:"POST",body:t})==="1"}async getFriends(){const e=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,type:0});e.authorize("db");const t=await this._creator._client.req("/getGJUserList20.php",{method:"POST",body:e});return t==="-1"?[]:t.split("|").map(n=>new StatlessSearchedUser(this._creator,parse(n)))}async getBlocked(){const e=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,type:1});e.authorize("db");const t=await this._creator._client.req("/getGJUserList20.php",{method:"POST",body:e});return t==="-1"?[]:t.split("|").map(n=>new StatlessSearchedUser(this._creator,parse(n)))}async getFriendsLeaderboard(){const e=new GDRequestParams({accountID:this.accountID,gjp:this._creds.gjp,type:"friends",page:0,total:0});e.authorize("db");const t=await this._creator._client.req("/getGJScores20.php",{method:"POST",body:e});if(t==="-1")return[];const n=t.slice(0,t.indexOf("#")).split("|").map(o=>new SearchedUser(this._creator,o)),s=n.pop();let a=n.findIndex(o=>o.stats.stars<=s.stats.stars);return a===-1&&(a=n.length),n.splice(a,0,s),n}async like(e){return e instanceof SearchedLevel?this.likeLevel(e):e instanceof LevelComment?this.likeComment(e):e instanceof AccountComment?this.likeAccountComment(e):!1}async dislike(e){return e instanceof SearchedLevel?this.dislikeLevel(e):e instanceof LevelComment?this.dislikeComment(e):e instanceof AccountComment?this.dislikeAccountComment(e):!1}async likeLevel(e){return e instanceof SearchedLevel&&(e=e.id),await like(e,0,1,!0,this.accountID,this._creds.gjp,this._creator._client)}async dislikeLevel(e){return e instanceof SearchedLevel&&(e=e.id),await like(e,0,1,!1,this.accountID,this._creds.gjp,this._creator._client)}async likeComment(e,t){if(e instanceof LevelComment){if(e.author.accountID===this.accountID)return!1;t=e.levelID,e=e.id}else t instanceof SearchedLevel&&(t=t.id);return await like(e,t,2,!0,this.accountID,this._creds.gjp,this._creator._client)}async dislikeComment(e,t){if(e instanceof LevelComment){if(e.author.accountID===this.accountID)return!1;t=e.levelID,e=e.id}else t instanceof SearchedLevel&&(t=t.id);return await like(e,t,2,!1,this.accountID,this._creds.gjp,this._creator._client)}async likeAccountComment(e,t){if(e instanceof AccountComment){if(t=e.author.accountID,t===this.accountID)return!1;e=e.id}else(t instanceof StatlessSearchedUser||t instanceof User)&&(t=t.accountID);return await like(e,t,3,!0,this.accountID,this._creds.gjp,this._creator._client)}async dislikeAccountComment(e,t){if(e instanceof AccountComment){if(t=e.author.accountID,t===this.accountID)return!1;e=e.id}else(t instanceof StatlessSearchedUser||t instanceof User)&&(t=t.accountID);return await like(e,t,3,!1,this.accountID,this._creds.gjp,this._creator._client)}async updateLevelDescription(e,t){if(e instanceof SearchedLevel){if(e.creator.id!==this.id)return!1;e=e.id}const n=new GDRequestParams({...this._creds,levelID:e,levelDesc:gdEncodeBase64(t)});return n.authorize("db"),await this._creator._client.req("/updateGJDesc20.php",{method:"POST",body:n})==="1"}}const ICONTYPEMAP=["cube","ship","ball","ufo","wave","robot","spider"];class SearchedUserCosmetics{constructor(e,t,n,s){this._creator=e,this.icon={val:t,type:n},this.colors=s}async renderIcon(e=!1){return await UserCosmetics.prototype.renderIcon.call({glow:0,[this.icon.type]:this.icon.val,_creator:this._creator,colors:this.colors},this.icon.type,e)}}class StatlessSearchedUser{constructor(e,t){this._creator=e;const n=typeof t=="string"?parse(t,"~"):t;this.username=n[1];const s=+n[2];s&&(this.id=s),this.accountID=+n[16],this.cosmetics=new SearchedUserCosmetics(e,+n[9],ICONTYPEMAP[+n[14]],{primary:userColor(+n[10]),secondary:userColor(+n[11])})}async getAccountComments(e){let t=!1;e||(e=1,t=!0);const n=Math.ceil(e/10),s=[];for(let a=0;a<n;a++){const o=new GDRequestParams({accountID:this.accountID,page:a,total:0});o.authorize("db");const u=await this._creator._client.req("/getGJAccountComments20.php",{method:"POST",body:o});if(u==="-1")return t?null:[];const c=u.slice(0,u.indexOf("#")).split("|");if(s.push(...c.map(l=>new AccountComment(this,l))),c.length<10)break}return t?s[0]||null:s.slice(0,e)}async getComments(e=!1,t){let n=!1;t||(t=1,n=!0);const s=new GDRequestParams({count:t,userID:this.id,mode:+e,page:0,total:0});s.authorize("db");const a=await this._creator._client.req("/getGJCommentHistory.php",{method:"POST",body:s});if(a==="-1")return n?null:[];const o=a.slice(0,a.indexOf("#")).split("|").map(u=>{const c=u.slice(0,u.indexOf(":"));return new LevelComment(this._creator,this,c)});return n?o[0]:o}async getLevels(e){return this._creator._client.levels.byCreator(this,{},e)}async resolve(){return await this._creator.get(this.accountID)}}class SearchedUser extends StatlessSearchedUser{constructor(e,t){const n=parse(t);super(e,n),this.stats={stars:+n[3],demons:+n[4],coins:{normal:+n[13],user:+n[17]},cp:+n[8]}}}class UserCreator extends Creator{async get(e){switch(typeof e){case"number":return await this.getByAccountID(e);case"string":return await this.getByUsername(e);case"object":if(e instanceof StatlessSearchedUser||e instanceof User)return await this.getByAccountID(e.accountID);default:return null}}async getByAccountID(e){const t=new GDRequestParams({targetAccountID:e});t.authorize("db");const n=await this._client.req("/getGJUserInfo20.php",{method:"POST",body:t});return n==="-1"?null:new User(this,n)}async search(e,t){let n=!1;t||(t=1,n=!0);const s=Math.ceil(t/10),a=[];for(let o=0;o<s;o++){const u=new GDRequestParams({str:e,page:o,total:0});u.authorize("db");const c=await this._client.req("/getGJUsers20.php",{method:"POST",body:u});if(c==="-1")return n?null:a;const l=c.slice(0,c.indexOf("#")).split("|");if(a.push(...l.map(h=>new SearchedUser(this,h))),l.length<10)break}return n?a[0]||null:a.slice(0,t)}async getByUsername(e,t=!0){const n=await this.search(e);return n&&n.username.toLowerCase()===e.toLowerCase()?t?n.resolve():n:null}async getLeaderboard(e=!1,t){let n=!1;t||(t=1,n=!0);const s=new GDRequestParams({count:t,type:e?"creators":"top",page:0,total:0});s.authorize("db");const a=await this._client.req("/getGJScores20.php",{method:"POST",body:s});if(a==="-1")return n?null:[];const o=a.slice(0,a.indexOf("#")).split("|").map(u=>new SearchedUser(this,u));return n?o[0]:o.slice(0,t)}async login(e){const t=new GDRequestParams;t.insertParams({userName:e.username,password:e.password,udid}),t.authorize("account");const n=await this._client.req("/accounts/loginGJAccount.php",{method:"POST",body:t});if(n==="-1")throw new TypeError("could not log in because the credentials were invalid");const[s]=n.split(",");return this.authorize({userName:e.username,accountID:+s,gjp:encrypt(e.password,accountKey)})}async authorize(e){const t=new GDRequestParams({targetAccountID:e.accountID});t.authorize("db");const n=await this._client.req("/getGJUserInfo20.php",{method:"POST",body:t});if(n==="-1")throw new TypeError("could not log in because the credentials were invalid");return new LoggedInUser(this,n,e)}}if(typeof fetch>"u")throw new Error("critical: gd.js cannot function without the fetch API, and it doesn't seem to exist in the current environment. Try polyfilling it with whatwg-fetch.");const fetch$1=fetch.bind(window),DEFAULT_CONFIG={logLevel:1,dbURL:"http://www.boomlings.com/database",fetch:fetch$1};class Client{constructor(e){if(!isServer&&!e.corsURL)throw new Error("critical: gd.js cannot function in the browser without a CORS proxy. Please provide a corsURL in the options to fix this issue.");this.config={...DEFAULT_CONFIG,...e},this.users=new UserCreator(this),this.levels=new LevelCreator(this)}async req(e,{method:t="GET",body:n=null}={},s=!1){let a=null;n&&(a=n.resolve());const o=await fetch$1((isServer?"":this.config.corsURL)+(e.startsWith("http")?"":this.config.dbURL)+e,{method:t,headers:{"User-Agent":""},referrerPolicy:"no-referrer",body:a});if(s)return o;const u=await o.text();return this.verbose(`Made a ${t} request to ${e}, response: ${u}`),u}warn(e){this.config.logLevel>0&&console.warn(e)}log(e){this.config.logLevel>0&&console.log(e)}verbose(e){this.config.logLevel>1&&console.log(e)}}function create_fragment(r){let e,t,n,s="MyDemon",a,o,u="Generate",c,l,h="<strong>If it says undefined, wait a bit. If nothing loads in a few seconds, try refreshing the page.</strong>",f,d,v,g,b="little applet made by batte :D",y,C,I;return d=new Level$1({props:{level_name:r[0],creator:r[1],id:r[2]}}),{c(){e=element("nav"),t=element("div"),n=element("span"),n.textContent=s,a=space(),o=element("button"),o.textContent=u,c=space(),l=element("h3"),l.innerHTML=h,f=space(),create_component(d.$$.fragment),v=space(),g=element("p"),g.textContent=b,this.h()},l(p){e=claim_element(p,"NAV",{class:!0});var m=children(e);t=claim_element(m,"DIV",{class:!0});var w=children(t);n=claim_element(w,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(n)!=="svelte-1snj3ie"&&(n.textContent=s),a=claim_space(w),o=claim_element(w,"BUTTON",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(o)!=="svelte-4d6k44"&&(o.textContent=u),w.forEach(detach),m.forEach(detach),c=claim_space(p),l=claim_element(p,"H3",{style:!0,"data-svelte-h":!0}),get_svelte_dataset(l)!=="svelte-15nmurh"&&(l.innerHTML=h),f=claim_space(p),claim_component(d.$$.fragment,p),v=claim_space(p),g=claim_element(p,"P",{style:!0,"data-svelte-h":!0}),get_svelte_dataset(g)!=="svelte-8da5b7"&&(g.textContent=b),this.h()},h(){attr(n,"class","navbar-brand"),attr(o,"class","btn btn-primary d-flex"),attr(t,"class","container"),attr(e,"class","navbar navbar-expand-lg navbar-dark bg-dark"),set_style(l,"text-align","center"),set_style(g,"text-align","center")},m(p,m){insert_hydration(p,e,m),append_hydration(e,t),append_hydration(t,n),append_hydration(t,a),append_hydration(t,o),insert_hydration(p,c,m),insert_hydration(p,l,m),insert_hydration(p,f,m),mount_component(d,p,m),insert_hydration(p,v,m),insert_hydration(p,g,m),y=!0,C||(I=listen(o,"click",r[3]),C=!0)},p(p,[m]){const w={};m&1&&(w.level_name=p[0]),m&2&&(w.creator=p[1]),m&4&&(w.id=p[2]),d.$set(w)},i(p){y||(transition_in(d.$$.fragment,p),y=!0)},o(p){transition_out(d.$$.fragment,p),y=!1},d(p){p&&(detach(e),detach(c),detach(l),detach(f),detach(v),detach(g)),destroy_component(d,p),C=!1,I()}}}function isRated(r){return r.award.raw!=0}function instance(r,e,t){const n=new Client({dbURL:"https://chillgdps.ps.fhgdps.com",corsURL:"https://corsproxy.io/?"}),s=(async()=>{let h=70;for(;;)try{return await n.levels.search({demon:!0},h)}catch{h-=10}})();async function a(h){return await n.users.getByAccountID(h)}let o,u,c;function l(){s.then(h=>{h=h.filter(v=>isRated(v));let f=h[Math.floor(Math.random()*h.length)];t(0,o=f.name);let d=f.creator.accountID;a(d).then(v=>t(1,u=v.username)),t(2,c=f.id)})}return onMount(()=>l()),[o,u,c,l]}class Page extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}export{Page as component};
